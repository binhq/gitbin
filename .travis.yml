language: go

sudo: false

go:
    - 1.7.x
    - 1.8.x
    - tip

before_install:
    - mkdir -p $HOME/bin
    - curl -s https://raw.githubusercontent.com/sagikazarmark/traviscripts/e106b6d593915a0cb736919ecb3804e8eb5e0440/scripts/glide.sh | bash
    - make envcheck

install: make setup

script: make check

after_success: if [[ "$TRAVIS_TAG" && $TRAVIS_GO_VERSION =~ ^1\.8(\.[0-9]+)?$ ]]; then curl -sL https://git.io/goreleaser | bash; fi
